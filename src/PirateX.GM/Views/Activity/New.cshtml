@using System.Reflection
@using PirateX.GMSDK
@using PirateX.GMSDK.Mapping
@using PirateX.Middleware

@{
    /**/

    ViewBag.Title = "New";
}

@{
    IGMUIItemMap map = ViewBag.ItemMap;
}


<div class="card">
    <div class="card-header bg-light">
        @map.Name
    </div>
    @using (Html.BeginForm("New", "Activity", new { ReturnUrl = ViewBag.ReturnUrl }, FormMethod.Post, new { @class = "form-group card-body" }))
    {
        <div class="alert alert-dismissible alert-secondary">
            @map.Des
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">×</span>
            </button>
        </div>

        <div>
            <div class="row form-group">
                <div class="col-lg-1">开始时间</div>
                <div class="col-lg-3"><input type="text" name="_startat_" class="form-control" /></div>
                <div class="col-lg-8">
                    <small class="form-text">xxxxx</small>
                </div>
            </div>

            <div class="row form-group">
                <div class="col-lg-1">结束时间</div>
                <div class="col-lg-3"><input type="text" name="_endat_" class="form-control" /></div>
                <div class="col-lg-8">
                    <small class="form-text">xxxxx</small>
                </div>
            </div>

            <div class="row form-group">
                <div class="col-lg-1">开放时间</div>
                <div class="col-lg-3">
                    <input type="checkbox"> 周一
                    <input type="checkbox"> 周二
                    <input type="checkbox"> 周三
                    <input type="checkbox"> 周四
                    <input type="checkbox"> 周五
                    <input type="checkbox"> 周六
                    <input type="checkbox"> 周七
                </div>
                <div class="col-lg-8">
                    <small class="form-text">xxxxxx</small>
                </div>
            </div>

            @foreach (IGMUIPropertyMap info in map.PropertyMaps)
            {
                <div class="row form-group">
                    <div class="col-lg-1">
                        @info.DisplayName
                    </div>
                    <div class="col-lg-3">
                        @if (info is GMUITextBoxPropertyMap)
                        {
                            <input type="text" name="@info.Name" class="form-control" />
                        }
                        else if (info is GMUIDropdownPropertyMap)
                        {
                            
                            <select name="@info.Name" class="form-control">
                                @foreach (GMUIListItem item in ((GMUIDropdownPropertyMap)info).ListDataProvider.GetListItems())
                                {
                                    <option value="@item.Value">@item.Name</option>
                                }
                            </select>
                        }
                        else
                        {
                            <div>控件没有实现！！！</div>
                        }
                    </div>
                    <div class="col-lg-8">
                        <small class="form-text">@info.Tips</small>
                    </div>
                </div>
            }
        </div>
    }
</div>

